<!DOCTYPE html>
<html lang="jp">
<html>
  <head>
    <!-- A-FrameをCDNから読み込む -->
<script type="importmap">{"imports": {"three": "https://threejs.org/build/three.module.js"}}</script>
<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <title>オブジェクトビューアー</title>
    <script src="camera.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
<meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="icon" type="image/x-icon" href="image/icon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  
 <style>
    input{
      color: white;
    }
  </style>
<body style="background-color: #9EA1E7;" id="body">
<a-scene>
  <a-entity id="env">
    <a-plane id='ground' wireframe='true' width='100' height='100' segments-height='10' segments-width='10' rotation='90 0 0' position="0 0 0"></a-plane>
  </a-entity>

  <a-entity id="mouse-cursor" cursor="rayOrigin: mouse; fuse:false" raycaster="objects:.collidable"></a-entity>

    <a-entity id="camera-rig" position-controls="axismove:x" camera-control="homePosition:0 0 3; vrHomePosition: 0 0 0.5">

      <a-camera look-controls="enabled:false" position="0 1.5 0"></a-camera>

      <a-entity laser-controls="hand: right" id="rightHand" raycaster="objects:.collidable"></a-entity>
      <a-entity laser-controls="hand: left" id="leftHand" raycaster="objects:.collidable"></a-entity>


    </a-entity>

    <a-gltf-model  id="test"src="./model/rpg-7.gltf" position="0 0 0" rotation="0 0 0" scale="10 10 10"></a-gltf-model>
    
  </a-scene>

  <p style="z-index: 100; position: absolute; left: 10px; top: 1px; color: white;">モデルファイルを選択</p>
  <input id="file-sample" type="file" style="z-index: 100; position: absolute; left: 6px; top: 26px" accept=".gltf,.vrm,.glb"> 
  <p style="z-index: 100; position: absolute; left: 10px; top: 60px; color: white;">背景画像を選択</p>
  <input id="bg" type="file" style="z-index: 100; position: absolute; left: 6px; top: 85px" accept=".png,.jpg">
  <button  style="z-index: 100; position: absolute; left: 10px; top: 130px" onclick="offplane();">
    plane off
  </button>
  <button  style="z-index: 100; position: absolute; left: 10px; top: 200px" onclick="onplane();">
    plane on
  </button>
  <script>
    document.getElementById('file-sample').addEventListener('change', function (e) {
      // 1枚だけ表示する
      var file = e.target.files[0];
  
      // ファイルのブラウザ上でのURLを取得する
      var blobUrl = window.URL.createObjectURL(file);
  
      
      document.getElementById('test').setAttribute("src",`${blobUrl}`)
  
  });
  document.getElementById('bg').addEventListener('change', function (e) {
    
    // 1枚だけ表示する
    var file = e.target.files[0];

    // ファイルのブラウザ上でのURLを取得する
    var blobUrl = window.URL.createObjectURL(file);

    
    document.getElementById('body').removeAttribute("style")
    document.getElementById('body').setAttribute("style",`background-image: url(${blobUrl}); background-size: cover; background-repeat: no-repeat;`)
});

function onplane(){
  document.getElementById('ground').setAttribute("width","100")
  document.getElementById('ground').setAttribute("height","100")
  document.getElementById('ground').setAttribute("position","0 0 0 ")

}
function offplane(){
  document.getElementById('ground').setAttribute("position","0 -100000000000000 0")
  document.getElementById('ground').setAttribute("width","0")
  document.getElementById('ground').setAttribute("height","0")
}
  </script>

</form>
</body>
</html>